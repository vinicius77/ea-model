FROM node:18-alpine
LABEL maintainer="vinicius.bonifacio1985@gmail.com"

RUN apk add --update git \
python3 \
make \
curl \
g++ && \
rm -rf /tmp/* /var/cache/apk/*

# Create app directory
RUN mkdir -p /src
WORKDIR /src

# Install app dependencies
ADD package.json /src/

RUN yarn

# Bundle app source
ADD . /src/

# For Node 17

ENV NODE_OPTIONS=--openssl-legacy-provider

RUN yarn run build

CMD ["yarn", "start" ]

EXPOSE 8080
